<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="Viewport" content="width=device-width, initial-scale=1.0">
    <title>All Products - Wokiee </title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/e197c9225b.js" crossorigin="anonymous"></script>
</head>
<body>


    <!---------------------HEADER SECTION---------------->
    <div class="page">
    <div class="container">
        <div class="navbar">
            <div class="logo">
                <a href="index.html"><img src="images/logo.png" width="125px"></a>
            </div>
            <nav>
                <ul id="MenuItems">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="account.html">Account</a></li>
                </ul>
            </nav>
            <a href="cart.html"><img src="images/cart.png" width="30px" height="30px"></a>
            <img src="images/menu.png" class="menu-icon" onclick="menutoggle()">
        </div>
    </div>
    

    <!---------------CART ITEMS DETAILS --------------->

        <div class="small-container cart-page">
            <table>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Subtotal</th>
                </tr>
                <tbody id="cart-items">
                    <!-- Cart items will be dynamically inserted here -->
                </tbody>
            </table>
            <hr>
            <div class="cart-total">
                <table>
                    <tr>
                        <td>Subtotal</td>
                        <td id="subtotal">₹0.00</td>
                    </tr>
                    <tr>
                        <td>Tax (10%)</td>
                        <td id="tax">₹0.00</td>
                    </tr>
                    <tr>
                        <td><strong>Total</strong></td>
                        <td id="total">₹0.00</td>
                    </tr>
                </table>
            </div>
            
            <div class="pay" style="display: flex;justify-content: end;"><button class="btn" style>Proceed to Payment</button>
            </div>
        </div>
    </div>

    <!------------JS FOR TOGGLE MENU------------->
    <script>
        var MenuItems = document.getElementById("MenuItems");
        MenuItems.style.maxHeight = "0px";
        function menutoggle(){
            if(MenuItems.style.maxHeight == "0px")
                {
                    MenuItems.style.maxHeight = "200px";
                }
            else
                {
                    MenuItems.style.maxHeight = "0px";
                }
        }



    </script>
    <script>
       function loadCart() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let cartTable = document.querySelector(".cart-page table");
    let totalPrice = 0;

    // Clear existing rows (except the header)
    cartTable.innerHTML = `
        <tr>
            <th>Product</th>
            <th>Quantity</th>
            <th>Subtotal</th>
        </tr>
    `;

    if (cart.length === 0) {
        // If cart is empty, show message
        cartTable.innerHTML += `
            <tr>
                <td colspan="3" style="text-align: center; padding: 20px;">No items in cart</td>
            </tr>
        `;
        document.getElementById("subtotal").innerText = "₹0.00";
        document.getElementById("tax").innerText = "₹0.00";
        document.getElementById("total").innerText = "₹0.00";
        return;
    }

    // Populate cart dynamically
    cart.forEach((item, index) => {
        let subtotal = item.price * item.quantity;
        totalPrice += subtotal;

        let row = document.createElement("tr");
        row.innerHTML = `
            <td>
                <div class="cart-info">
                    <img src="${item.image}" width="70">
                    <div>
                        <p>${item.name}</p>
                        <small>Price: &#x20B9;${item.price}</small>
                        <br>
                        <a href="#" onclick="removeItem(${index})">Remove</a>
                    </div>
                </div>
            </td>
            <td><input type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${index}, this.value)"></td>
            <td>&#x20B9;${subtotal.toFixed(2)}</td>
        `;
        cartTable.appendChild(row);
    });

    // Update total price
    document.getElementById("subtotal").innerText = "₹" + totalPrice.toFixed(2);
    document.getElementById("tax").innerText = "₹" + (totalPrice * 0.1).toFixed(2); // Assume 10% tax
    document.getElementById("total").innerText = "₹" + (totalPrice * 1.1).toFixed(2);
}

function updateQuantity(index, quantity) {
    let cart = JSON.parse(localStorage.getItem("cart"));
    cart[index].quantity = parseInt(quantity);
    localStorage.setItem("cart", JSON.stringify(cart));
    loadCart();
}

function removeItem(index) {
    let cart = JSON.parse(localStorage.getItem("cart"));
    cart.splice(index, 1);
    localStorage.setItem("cart", JSON.stringify(cart));
    loadCart();
}

function clearCart() {
    localStorage.removeItem("cart");
    loadCart();
}

document.addEventListener("DOMContentLoaded", loadCart);

    </script>
    
</body>
</html>